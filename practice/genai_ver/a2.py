from dotenv import load_dotenv
import os
load_dotenv()

from google import genai
from google.genai.types import GenerateContentConfig

client = genai.Client(api_key = os.getenv("GENAI_API_KEY"))

# 演習: ここにinput_text変数に代入する処理を書こう
input_text = "DDDにおける業務領域は関連するユースケースの集まりだと言われていますが、本当ですか？理由も教えてください。"
input_text1 = "夏の記憶をテーマに自由詩を作ってください。"
response = client.models.generate_content(
    model="gemini-2.5-flash-lite",
    # 演習: ここにinput_text変数を埋め込んでプロンプトを完成させよう
    contents=f"""{input_text1} """,
    # 演習: ここで温度を設定して違いを観察しよう
    # タスクによってどんな温度が適切か、応答速度、創造性、正確性のトレードオフを体験しよう
    config=GenerateContentConfig(temperature=1.0),
)
print(response.text)

# ### 0.0 の例
# takatty@takattyM2MBP [20:05:03] [~/software/llm/llm-study20251201] [main *]
# -> % uv run python3 practice/genai_ver/a2.py
# 「私はサッカーを趣味にしています。」を英語に翻訳すると、いくつか言い方があります。

# 最も一般的で自然な表現は以下の通りです。

# *   **I play soccer as a hobby.**
# *   **Soccer is my hobby.**

# その他にも、少しニュアンスが異なる表現もあります。

# *   **I enjoy playing soccer in my free time.** (自由な時間にサッカーをするのを楽しんでいます。)
# *   **My hobby is playing soccer.** (私の趣味はサッカーをすることです。)

# どの表現を使うかは、文脈や伝えたいニュアンスによって選んでください。

# ### 0.5 の例
# takatty@takattyM2MBP [20:05:08] [~/software/llm/llm-study20251201] [main *]
# -> % uv run python3 practice/genai_ver/a2.py
# 「私はサッカーを趣味にしています。」を英語に翻訳すると、いくつか言い方があります。

# 最も一般的で自然な表現は以下の通りです。

# *   **I play soccer as a hobby.**
#     *   これが最も直接的で分かりやすい表現です。

# その他の言い方としては、以下のようなものもあります。

# *   **Soccer is my hobby.**
#     *   こちらも一般的で、シンプルです。
# *   **I enjoy playing soccer in my free time.**
#     *   「自由な時間に」というニュアンスを加えたい場合に適しています。
# *   **I'm a soccer enthusiast.**
#     *   「熱狂的なファン」というニュアンスが強くなりますが、趣味として熱心に取り組んでいる場合に使うことができます。

# どの表現を使うかは、伝えたいニュアンスや状況によって選んでください。一般的には **"I play soccer as a hobby."** が最も無難で使いやすいでしょう。

# ### 1.0 の例
# takatty@takattyM2MBP [20:05:21] [~/software/llm/llm-study20251201] [main *]
# -> % uv run python3 practice/genai_ver/a2.py
# 「私はサッカーを趣味にしています。」を英語に翻訳すると、いくつか自然な表現があります。

# * **I play soccer as a hobby.**
#     * これが最も直接的で一般的な表現です。

# * **My hobby is playing soccer.**
#     * こちらも自然でよく使われます。

# * **I'm a soccer enthusiast.** (少しレベルアップした表現)
#     * 「熱心なサッカーファン」というニュアンスも含まれますが、趣味として熱心にやっている場合にも使えます。

# * **I enjoy playing soccer in my free time.**
#     * 「空いた時間にサッカーをするのが好きです」というニュアンスです。

# どれを使っても意味は通じますが、**"I play soccer as a hobby."** が最もスタンダードで分かりやすいでしょう。

# ### 0.0 の例
# takatty@takattyM2MBP [20:11:03] [~/software/llm/llm-study20251201] [main *]
# -> % uv run python3 practice/genai_ver/a2.py
# DDD（ドメイン駆動設計）における「業務領域（Business Domain）」は、必ずしも「関連するユースケースの集まり」と断定できるほど単純なものではありません。しかし、**関連するユースケースの集まりは、業務領域を理解し、モデリングする上で非常に重要な要素であり、密接に関連している**と言えます。

# 以下にその理由を説明します。

# ### なぜ「関連するユースケースの集まり」が業務領域と密接に関連するのか？

# 1.  **ユースケースは「何をするか」を具体的に示す:**
#     *   ユースケースは、システムがユーザー（アクター）に対して提供する機能や、システムが達成すべき目的を記述したものです。
#     *   例えば、「注文を作成する」「商品を検索する」「在庫を確認する」といったユースケースは、システムがどのような「業務」を遂行するのかを具体的に示しています。
#     *   これらのユースケースが集まることで、そのシステムが担うべき「業務」の範囲や内容が明らかになります。

# 2.  **業務領域は「何を達成したいか」という目的を持つ:**
#     *   業務領域は、単なる機能の羅列ではなく、そのビジネスが「何を達成したいのか」「どのような価値を提供したいのか」という目的やゴールを含んでいます。
#     *   例えば、「顧客満足度の向上」という業務領域の目的を達成するために、「迅速な注文処理」「パーソナライズされたレコメンデーション」「効果的な問い合わせ対応」といったユースケースが必要になります。
#     *   このように、ユースケースは業務領域の目的を達成するための具体的な手段や活動として位置づけられます。

# 3.  **ユースケースは業務領域の境界を定義する手がかりになる:**
#     *   あるユースケースが、特定の業務領域に属するかどうかを判断することで、業務領域の境界を明確にするのに役立ちます。
#     *   例えば、「商品の在庫管理」に関するユースケースは「在庫管理」という業務領域に、「商品の販売」に関するユースケースは「販売管理」という業務領域に属すると考えられます。
#     *   このように、ユースケースの集合は、業務領域を分割し、それぞれの責任範囲を定義する際のインジケーターとなります。

# 4.  **ユースケースは業務領域の知識を抽出する起点となる:**
#     *   ユースケースを分析する過程で、そのユースケースを実現するために必要なドメイン知識（ビジネスルール、概念、関係性など）が明らかになります。
#     *   例えば、「注文を作成する」ユースケースを分析すると、「顧客」「商品」「数量」「価格」「支払い方法」「配送先」といったドメイン概念や、「在庫があるか確認する」「合計金額を計算する」といったビジネスルールが抽出されます。
#     *   これらの抽出された知識は、業務領域のコアとなるドメインモデルを構築するための重要な材料となります。

# ### なぜ「集まり」だけでは不十分なのか？

# 一方で、業務領域は単なるユースケースの「集まり」以上のものです。

# *   **業務領域は、ユースケースの背後にある「目的」「戦略」「ビジネスモデル」を含む:**
#     *   例えば、同じ「注文処理」というユースケースでも、B2CのECサイトとB2Bの卸売業者では、その目的や重視される要素（スピード、カスタマイズ性、大量注文への対応など）が異なります。
#     *   業務領域は、これらのビジネスの文脈や戦略を包含します。

# *   **業務領域は、ユースケース間の「関係性」や「相互作用」を考慮する:**
#     *   複数のユースケースが連携して、より大きなビジネスプロセスを形成します。業務領域は、これらのユースケースがどのように連携し、全体としてどのような価値を生み出すのかという視点を含みます。

# *   **業務領域は、ドメインモデルという「構造」を持つ:**
#     *   DDDの核心は、業務領域の概念を表現するドメインモデルを構築することです。このドメインモデルは、ユースケースを実現するための「構造」であり、単なる機能のリストではありません。エンティティ、値オブジェクト、集約、リポジトリといった要素で構成されます。

# ### まとめ

# 「業務領域は関連するユースケースの集まりだ」という表現は、**業務領域を理解し、モデリングする上での「入り口」や「手がかり」としては非常に有効**です。ユースケースを分析することで、業務領域の範囲、内容、そしてそこで行われるべき活動が具体的に見えてきます。

# しかし、より正確には、**業務領域は、特定のビジネス目的を達成するために、関連するユースケース群とその背後にあるビジネスロジック、ドメイン知識、そしてそれらを構造化したドメインモデルを含んだ、より包括的な概念**と言えます。

# したがって、「関連するユースケースの集まり」は、業務領域を構成する**重要な要素の一つ**であり、業務領域を理解するための**強力な手がかり**ですが、業務領域そのものを完全に定義するものではありません。

# ### 0.5 の例
# takatty@takattyM2MBP [20:11:10] [~/software/llm/llm-study20251201] [main *]
# -> % uv run python3 practice/genai_ver/a2.py
# DDD（ドメイン駆動設計）における「業務領域（Bounded Context）」は、関連するユースケースの集まりである、というのは**概ね正しいですが、より正確には「一貫性のあるモデルを維持できる範囲」と捉えるのが適切です。**

# なぜそう言えるのか、理由を以下に説明します。

# ### 業務領域（Bounded Context）とは何か？

# DDDにおける業務領域（Bounded Context）は、特定のドメイン（事業領域）において、**一貫性のある言語（ユビキタス言語）とモデル（概念、ルール、振る舞い）が通用する論理的な境界線**を指します。

# ### なぜ「関連するユースケースの集まり」と捉えられるのか？

# 1.  **ユースケースは業務領域の活動を表す:**
#     ユースケースは、システムがユーザーや他のシステムに対して提供する機能や、それによって達成される業務上の目的を記述したものです。これらのユースケースは、特定の業務領域内で発生する活動や要求を具体的に表しています。
#     例えば、「注文管理」という業務領域には、「注文を作成する」「注文をキャンセルする」「注文のステータスを変更する」といったユースケースが存在します。これらのユースケースは、すべて「注文」という概念を中心に、その業務領域内で意味を持ちます。

# 2.  **共通のモデルとユビキタス言語を共有する:**
#     同じ業務領域内のユースケースは、通常、共通のドメインモデル（エンティティ、値オブジェクト、集約など）と、それらを説明するためのユビキタス言語（開発者とドメインエキスパートが共有する共通の言葉）を共有します。
#     例えば、「注文」という言葉が、ある業務領域では「顧客が購入を確定した商品リスト」を指すかもしれませんが、別の業務領域では「販売者が顧客に発送する予定の商品リスト」を指すかもしれません。このように、同じ言葉でも文脈によって意味が変わるため、業務領域ごとにモデルとユビキタス言語を区切ることが重要になります。
#     関連するユースケース群は、まさにこの共通のモデルとユビキタス言語によって結びつけられています。

# 3.  **境界線によってモデルの整合性を保つ:**
#     DDDでは、単一の巨大なモデルではなく、複数の業務領域（Bounded Context）に分割することを推奨します。これは、それぞれの業務領域内で、その文脈に特化した、よりシンプルで理解しやすいモデルを構築するためです。
#     もし、異なる意味合いを持つ「注文」という概念が、一つの大きなモデルの中に混在してしまうと、モデルは複雑になり、整合性を保つのが困難になります。業務領域という境界線は、このようなモデルの混在を防ぎ、各領域内での一貫性を保つための仕組みです。
#     関連するユースケース群は、その業務領域という境界線の中で、一貫したモデルに基づいて実行されると考えることができます。

# ### なぜ「集まり」だけでは不十分で、「一貫性のあるモデルを維持できる範囲」がより正確なのか？

# *   **単なるユースケースの羅列ではない:** 業務領域は、単に機能（ユースケース）をリストアップしたものではありません。そのユースケース群を支える、**深みのあるドメインモデルと、それを表現するユビキタス言語**が不可欠です。
# *   **モデルの独立性と整合性:** 業務領域の最も重要な役割は、**各領域内でモデルの独立性と整合性を保つこと**です。ユースケースはそのモデルを活用して業務を遂行しますが、業務領域の本質は、その「モデル」と「言語」の統一性にあります。
# *   **境界の重要性:** 業務領域の「境界」は、モデルの整合性を保つための明確な区切りです。この境界を越える際には、明示的な連携（コンテキストマップなど）が必要になります。ユースケースは、この境界の内側で完結することが期待されます。

# ### まとめ

# DDDにおける業務領域（Bounded Context）は、**「関連するユースケース群」を内包し、それらを支える「一貫性のあるドメインモデルとユビキタス言語」を維持できる論理的な範囲**であると言えます。

# ユースケースは業務領域の活動を具体化するものですが、業務領域の本質は、その活動を支える「モデル」と「言語」の統一性、そしてその境界線によって保たれる整合性にあります。したがって、「関連するユースケースの集まり」という表現は、業務領域の一側面を捉えていますが、その背後にある「モデル」と「言語」の重要性まで含めて理解することが、DDDを実践する上でより重要となります。

# ### 1.0 の例
# takatty@takattyM2MBP [20:11:49] [~/software/llm/llm-study20251201] [main *]
# -> % uv run python3 practice/genai_ver/a2.py
# DDD（ドメイン駆動設計）における「業務領域（Domain）」は、必ずしも「関連するユースケースの集まり」と断定できるものではなく、**そのように限定してしまうとDDDの本質を見誤る可能性があります。**

# ただし、**「関連するユースケースの集まり」という側面も、業務領域を理解する上で重要な要素の一つである**ことは事実です。

# 以下に、その理由と、なぜ「ユースケースの集まり」だけでは不十分なのかを説明します。

# ### なぜ「関連するユースケースの集まり」という側面があるのか？

# DDDでは、システムが解決すべき「問題領域」や「ビジネスの核となる部分」を「ドメイン」と定義します。このドメインを、開発チームが共通の理解を持つための「言葉（ユビキタス言語）」を用いてモデリングしていきます。

# ユースケースは、システムがユーザー（あるいは他のシステム）に対して提供する「機能」や「振る舞い」を記述したものです。**業務領域における主要な活動や達成したい目標は、しばしばユースケースとして表現されます。**

# 例えば、「オンラインショッピング」という業務領域を考えた場合、以下のようなユースケースが関連してくるでしょう。

# *   **商品を検索する**
# *   **商品をカートに追加する**
# *   **注文を確定する**
# *   **決済を行う**
# *   **注文履歴を確認する**

# これらのユースケースは、確かに「オンラインショッピング」という業務領域内で発生する活動を具体的に示しており、業務領域を理解する上で非常に役立ちます。DDDの文脈では、これらのユースケースを支えるコアな概念やロジックをモデリングしていくことになります。

# ### なぜ「ユースケースの集まり」だけでは不十分なのか？

# DDDにおける業務領域は、単なる機能の羅列以上の、より深い意味合いを持っています。

# 1.  **ドメインの「核」や「本質」の表現:**
#     業務領域は、ビジネスがどのように価値を生み出しているのか、その**「なぜ」や「どのように」**といった本質的な部分を捉えるべきです。ユースケースは「何をするか」に焦点を当てがちですが、業務領域は「なぜそれをするのか」「どのようなビジネスルールや制約があるのか」といった、より深いビジネスの論理や概念を含みます。

#     例えば、「注文を確定する」というユースケースだけを見ても、その背後にある「在庫管理」「価格設定」「顧客の信用度」「配送方法の選択」といった、より広範で複雑なビジネスロジックや概念が業務領域を構成しています。

# 2.  **概念モデル (Conceptual Model) の重要性:**
#     DDDでは、業務領域を捉えるために「概念モデル」を構築します。この概念モデルは、ドメイン内の主要なエンティティ、値オブジェクト、集約、ドメインサービスといった要素と、それらの間の関係性や振る舞いを表現します。

#     ユースケースは、この概念モデルがどのように利用されるか、あるいはどのように機能を発揮するかを示す例となります。しかし、概念モデル自体は、ユースケースという個々の機能を超えた、**ドメイン全体の構造と意味合い**を表現するものです。

# 3.  **境界づけられたコンテキスト (Bounded Context) の理解:**
#     DDDでは、大規模なドメインを、意味論的に一貫した「境界づけられたコンテキスト」に分割します。各コンテキストは、独自のユビキタス言語と概念モデルを持ちます。

#     ある「オンラインショッピング」という言葉でも、例えば「マーケティング部門」と「物流部門」では、同じ「商品」という言葉でも意味合いが異なる場合があります。ユースケースだけでは、このようなコンテキスト間の境界や、それぞれのコンテキストにおけるドメインの解釈の違いを捉えきれません。業務領域は、これらの境界づけられたコンテキスト全体、あるいはその一部を指し示すことがあります。

# 4.  **「問題」と「解決策」の区別:**
#     ユースケースは、システムが提供する「解決策」の一部です。一方、業務領域は、解決すべき「問題」や「ビジネスの活動そのもの」を指します。DDDは、この問題領域を深く理解し、それに適合したソフトウェアを設計することを目指します。

# ### まとめ

# 「業務領域は関連するユースケースの集まり」という表現は、**業務領域の一部を理解するための手がかりとしては有効**です。ユースケースは、業務領域における具体的な活動や振る舞いを捉えるのに役立ちます。

# しかし、DDDにおける「業務領域」は、単なる機能の集合ではなく、**ビジネスの核となる概念、ルール、プロセス、そしてそれらを支える本質的なロジック全体**を指します。ユースケースはその業務領域を「どう使うか」という側面を具体化するものであり、業務領域そのものの定義を完全に包含するものではありません。

# DDDでは、ユースケースを起点としてドメインを理解し、そこからさらに概念モデルを深掘りし、本質的な業務領域をモデリングしていく、というアプローチが重要となります。